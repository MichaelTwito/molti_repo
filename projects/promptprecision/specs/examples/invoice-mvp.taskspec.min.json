{
  "task_id": "invoice_mvp_extract_min_v1",
  "task_version": "1.0.0",
  "system_prompt": "You extract structured data from invoices. Output ONLY valid JSON. Do not include markdown or extra keys.",
  "instruction_template": "Extract the invoice fields from the text below. If a field is missing, use null (do not guess).\n\nINVOICE TEXT:\n{{input_text}}\n",
  "io_schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "InvoiceExtractionMin",
    "type": "object",
    "additionalProperties": false,
    "required": ["invoice_number", "invoice_date", "currency", "total", "line_items"],
    "properties": {
      "invoice_number": { "type": ["string", "null"], "minLength": 1 },
      "invoice_date": {
        "type": ["string", "null"],
        "description": "ISO-8601 date (YYYY-MM-DD) when possible.",
        "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
      },
      "currency": { "type": ["string", "null"], "pattern": "^[A-Z]{3}$" },
      "total": { "type": ["number", "null"] },
      "vendor_name": { "type": ["string", "null"] },
      "line_items": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description", "quantity", "unit_price", "line_total"],
          "properties": {
            "description": { "type": "string", "minLength": 1 },
            "quantity": { "type": "number" },
            "unit_price": { "type": "number" },
            "line_total": { "type": "number" }
          }
        }
      }
    }
  },
  "example": {
    "input_text": "ACME Services\nINVOICE\nInvoice # 1007\nDate 2026-02-20\nTotal USD 199.00\n\n1 x Subscription @ 199.00 = 199.00\n",
    "output_json": {
      "invoice_number": "1007",
      "invoice_date": "2026-02-20",
      "currency": "USD",
      "total": 199.0,
      "vendor_name": "ACME Services",
      "line_items": [
        {
          "description": "Subscription",
          "quantity": 1,
          "unit_price": 199.0,
          "line_total": 199.0
        }
      ]
    }
  }
}
